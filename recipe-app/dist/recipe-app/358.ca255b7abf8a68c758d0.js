"use strict";(self.webpackChunkrecipe_app=self.webpackChunkrecipe_app||[]).push([[358],{8358:(k,I,a)=>{a.r(I),a.d(I,{RecipeBuilderModule:()=>S});var l=a(8583);class m{constructor(o,t,i,r,s){this.id=o,this.recipeId=t,this.measurement=i,this.ingredient=r,this.preparation=s}}var e=a(3018),u=a(9516),_=a(1312),g=a(5939),p=a(8756),d=a(665),v=a(1095);function C(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"div",3),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().itemSelected(s)}),e._uU(2),e.qZA(),e.qZA()}if(2&n){const t=o.$implicit;e.xp6(2),e.Oqu(t)}}let T=(()=>{class n{constructor(t){this.dialog=t,this.currentType="",this.measurement=["cups","liters","ounces"],this.ingredients=["beef","carrots","blueberries"],this.prepared=["sliced","diced","broiled"],this.currentItem="",this.itemCompleteEvent=new e.vpe,this.itemSubmit=new e.vpe}ngOnChanges(){switch(this.currentType){case"measurement":this.currentArray=this.measurement;break;case"ingredients":this.currentArray=this.ingredients;break;case"prepared":this.currentArray=this.prepared}}itemSelected(t){this.currentItem=t,"measurement"===this.currentType?this.dialog.open(Z,{width:"250px",data:{item:this.currentItem,size:""}}).afterClosed().subscribe(r=>{null!=r&&(console.log(r),this.currentItem=r+" "+this.currentItem,this.itemCompleteEvent.emit({section:this.currentType,value:this.currentItem}))}):this.itemCompleteEvent.emit({section:this.currentType,value:this.currentItem})}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-item-selector"]],inputs:{currentType:"currentType"},outputs:{itemCompleteEvent:"itemCompleteEvent",itemSubmit:"itemSubmit"},features:[e.TTD],decls:2,vars:1,consts:[[2,"display","flex"],["class","items",4,"ngFor","ngForOf"],[1,"items"],[1,"item-value",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,C,3,1,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",i.currentArray))},directives:[l.sg],styles:[".item-value[_ngcontent-%COMP%]{display:flex;padding:5px 10px;margin:5px 10px;border:1px solid black;border-radius:10px}.item-value[_ngcontent-%COMP%]:hover{background-color:gray}.items[_ngcontent-%COMP%]{display:flex}"]}),n})(),Z=(()=>{class n{constructor(t,i){this.dialogRef=t,this.data=i}onNoClick(){this.dialogRef.close()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.so),e.Y36(p.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["dialog-measurement-dialog"]],decls:8,vars:3,consts:[["matInput","","name","size",3,"ngModel","ngModelChange"],["mat-button","",3,"click"],["mat-button","",3,"mat-dialog-close"]],template:function(t,i){1&t&&(e.TgZ(0,"input",0),e.NdJ("ngModelChange",function(s){return i.data.size=s}),e.qZA(),e.TgZ(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"mat-dialog-actions"),e.TgZ(4,"button",1),e.NdJ("click",function(){return i.onNoClick()}),e._uU(5,"No"),e.qZA(),e.TgZ(6,"button",2),e._uU(7,"Yes"),e.qZA(),e.qZA()),2&t&&(e.Q6J("ngModel",i.data.size),e.xp6(2),e.Oqu(i.data.item),e.xp6(4),e.Q6J("mat-dialog-close",i.data.size))},directives:[d.Fj,d.JJ,d.On,p.H8,v.lW,p.ZT],encapsulation:2}),n})();const y=function(n){return{"selected-item":n}};function b(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",13),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().changeItem(s)}),e._uU(2),e.qZA(),e.qZA()}if(2&n){const t=o.$implicit,i=o.index,r=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(5,y,r.selectedItem==t)),e.xp6(1),e.HOy(" ",i+1,": ",t.measurement," ",t.ingredient," ",t.preparation,"")}}let f=(()=>{class n{constructor(t,i){var r,s;this._router=t,this.server=i,this.measurementItem="",this.ingredientsItem="",this.preparedItem="",this.steps=[],this.recipeId="",this._router&&(null===(r=this._router.getCurrentNavigation())||void 0===r?void 0:r.extras.state)&&(this.routeState=null===(s=this._router.getCurrentNavigation())||void 0===s?void 0:s.extras.state,this.routeState&&(this.recipeId=this.routeState.recipeId,localStorage.setItem("currentRecipe",this.recipeId))),localStorage.getItem("currentRecipe")&&(this.recipeId=localStorage.getItem("currentRecipe")||"")}ngOnInit(){this.server.getRecipeItems({recipeId:this.recipeId}).then(t=>{var i;if("ok"===t.body.status){console.log(this.recipeId),console.log(t.body.steps);for(let r of t.body.steps)console.log(r),null===(i=this.steps)||void 0===i||i.push(new m(r.recipeItem_id,r.recipeId,r.measurement,r.ingredient,r.preparation))}})}updateRecipeInformation(t){this.server.updateRecipeInfo({recipeId:this.recipeId,instructions:t,itemLength:this.steps.length}).then(i=>{"ok"===i.body.status&&(console.log(i.body.item),this._router.navigateByUrl("/user"))})}checkComplete(t){switch(console.log(t),t.section){case"measurement":this.measurementItem=t.value;break;case"ingredients":this.ingredientsItem=t.value;break;case"prepared":this.preparedItem=t.value}}changeItem(t){this.selectedItem===t?(this.selectedItem=void 0,this.measurementItem="",this.ingredientsItem="",this.preparedItem=""):(this.selectedItem=t,this.measurementItem=t.measurement,this.ingredientsItem=t.ingredient,this.preparedItem=t.preparation)}generateIngredients(){if(console.log(this.measurementItem),new m(0,0,"","",""),this.selectedItem){let i=this.steps.indexOf(this.selectedItem);console.log(i),this.server.updateRecipeItems({itemId:this.steps[i].id,measurement:this.measurementItem,preparation:this.preparedItem,ingredient:this.ingredientsItem}).then(r=>{if("ok"===r.body.status){let s=this.measurementItem,c=this.preparedItem,h=this.ingredientsItem;this.steps[i]=new m(this.steps[i].id,parseInt(this.recipeId),s,h,c),console.log(this.steps)}})}else this.server.setRecipeItems({measurement:this.measurementItem,preparation:this.preparedItem,ingredient:this.ingredientsItem,recipeId:this.recipeId}).then(i=>{var r;if("ok"===i.body.status){let s=this.measurementItem,c=this.preparedItem,h=this.ingredientsItem;null===(r=this.steps)||void 0===r||r.push(new m(i.body.itemId,parseInt(this.recipeId),s,h,c)),console.log(this.steps)}});this.selectedItem=void 0}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.F0),e.Y36(_.N))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-recipe-selector"]],decls:30,vars:8,consts:[[1,"recipe-creator-container"],["label","measurement"],[3,"currentType","itemCompleteEvent"],["measure",""],["label","ingredients"],["ingredient",""],["label","prepared"],["prepared",""],[2,"margin-top","15px",3,"disabled","click"],[4,"ngFor","ngForOf"],["rows","10"],["instructions",""],[3,"click"],[1,"ing-item",3,"ngClass","click"]],template:function(t,i){if(1&t){const r=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"mat-tab-group"),e.TgZ(2,"mat-tab",1),e.TgZ(3,"app-item-selector",2,3),e.NdJ("itemCompleteEvent",function(c){return i.checkComplete(c)}),e.qZA(),e.qZA(),e.TgZ(5,"mat-tab",4),e.TgZ(6,"app-item-selector",2,5),e.NdJ("itemCompleteEvent",function(c){return i.checkComplete(c)}),e.qZA(),e.qZA(),e.TgZ(8,"mat-tab",6),e.TgZ(9,"app-item-selector",2,7),e.NdJ("itemCompleteEvent",function(c){return i.checkComplete(c)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div"),e._uU(12),e.qZA(),e.TgZ(13,"div"),e._uU(14),e.qZA(),e.TgZ(15,"div"),e._uU(16),e.qZA(),e.TgZ(17,"button",8),e.NdJ("click",function(){return i.generateIngredients()}),e._uU(18,"Enter Ingredient"),e.qZA(),e.TgZ(19,"h3"),e._uU(20,"Ingredient list:"),e.qZA(),e.YNc(21,b,3,7,"div",9),e.TgZ(22,"h3"),e._uU(23,"Instructions:"),e.qZA(),e._UZ(24,"textarea",10,11),e.TgZ(26,"h4"),e._uU(27,"Submit:"),e.qZA(),e.TgZ(28,"button",12),e.NdJ("click",function(){e.CHM(r);const c=e.MAs(25);return i.updateRecipeInformation(c.value)}),e._uU(29,"Submit item"),e.qZA(),e.qZA()}2&t&&(e.xp6(3),e.Q6J("currentType","measurement"),e.xp6(3),e.Q6J("currentType","ingredients"),e.xp6(3),e.Q6J("currentType","prepared"),e.xp6(3),e.hij("Measurement:",i.measurementItem,""),e.xp6(2),e.hij("Ingredient:",i.ingredientsItem,""),e.xp6(2),e.hij("Prepared:",i.preparedItem,""),e.xp6(1),e.Q6J("disabled",""===i.measurementItem||""===i.ingredientsItem||""===i.preparedItem),e.xp6(4),e.Q6J("ngForOf",i.steps))},directives:[g.SP,g.uX,T,l.sg,l.mk],styles:[".ing-item[_ngcontent-%COMP%]:hover{background-color:gray}.selected-item[_ngcontent-%COMP%]{background-color:gray}.recipe-creator-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;width:960px}app-recipe-selector[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),n})();const R=[{path:"",component:f}];let A=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[u.Bz.forChild(R)],u.Bz]}),n})(),S=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n,bootstrap:[f]}),n.\u0275inj=e.cJS({imports:[[l.ez,g.Nh,v.ot,d.u5,p.Is,A]]}),n})()}}]);